現在の仕様（手短に）

サーバ構成

Ruby + WEBrick（ポート 8000）
ローカルユーザディレクトリ users/{username}/ で各ユーザを管理
投稿は users/{username}/posts.json にユーザ別で保存
エンドポイント

エンドポイント	方式	説明
/	GET/POST	ログインフォーム・ログイン処理
/signup	GET/POST	新規登録フォーム・登録処理
/home	GET	ローカル投稿タイムライン表示（Cookie 認証）
/global	GET	リモート投稿タイムライン表示（Network.fetch_posts）
/post	POST	投稿送信（ローカル保存）
/latest_posts	GET	JSON で最新 20 件投稿返却（ローカル + リモート統合）
認証

Cookie (username) ベース
パスワードは RSA 秘密鍵（AES-256-CBC 暗号化）との照合で検証
データ保存

投稿：users/{username}/posts.json（各ユーザが自分の投稿を保持）
ユーザ情報：users/{username}/profile.json（公開鍵、ユーザ名）
秘密鍵：users/{username}/private.pem（パスワード暗号化）
P2P 機能

Network.fetch_posts：nodes.json に登録されたリモートノードから /latest_posts で投稿を取得
/gossip エンドポイント：リモートノードからのゴシッププロトコル受信用（実装が空）
課題

ノード間送信（broadcast）未実装
セッション管理不完全（$sessions グローバルが /signup でのみ使われ、/home では username Cookie 直接使用）
無限ループ防止なし（リモート同期時に同じポストが重複する可能性）